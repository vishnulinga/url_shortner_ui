<!DOCTYPE html>
<head>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
</head>
<body style="background-image: url(https://www.gonzaga.edu/-/media/Website/Images/Body-Content/Giving/Zags-at-Home/Zoom-BGs/spires-dark-blue.ashx?la=en&hash=EDD0920EFC7D8A967AFA14E2789AC1549F0F889E);">
<div class="container">
<div style="margin-left: 30%;margin-right: 30%;margin-top: 100px;">
    
    <div class="input-group mb-3">
        <div class="input-group-prepend">
          <span class="input-group-text" id="basic-addon3">New Password</span>
        </div>
        <input type="password" placeholder="Password" class="form-control" id="password" aria-describedby="basic-addon3">
      </div>
      <div class="input-group mb-3">
        <div class="input-group-prepend">
          <span class="input-group-text" id="basic-addon3">Re-Enter Password</span>
        </div>
        <input type="password" placeholder="Password" class="form-control" id="repassword" aria-describedby="basic-addon3">
      </div>
      <button type="button" class="btn btn-success" onclick="reset()">Reset</button>
     
</div>
</div>


<script>
    async function reset(){
       console.log("hello")
        if(document.getElementById("password").value==document.getElementById("repassword").value) { 
       
        console.log("entered")
        let res=await fetch("https://longshorturl.herokuapp.com/users/reset",{
            method:"POST",
            body:JSON.stringify({
                
                password:document.getElementById("password").value
            }),
            headers:{
                "Content-Type":"application/json",
            }
            
        })
        let result=await res.json()
        if(result.message=="password updated"){
          alert("Password changed")
          
          window.open("index.html")
        }
        else{
           alert("Wrong UserID")
           
              location.reload();
          
        }
    }
       
        
    
    else{
        alert("Passwords didn't match")
        
              location.reload();
           
    }
    
}
</script>
</body>
